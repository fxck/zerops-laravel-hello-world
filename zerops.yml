zerops:
  - setup: app
    build:
      base:
        - nodejs@18
        - php@8.3
      buildCommands:
        - node -v
        - composer install --optimize-autoloader --no-dev
        - npm install
        - npm run build
      deploy: ./
      cache:
        - vendor
        - composer.lock
        - node_modules
        - package-lock.json
    run:
      initCommands:
        - php artisan migrate --isolated --force
        - php artisan view:cache
        - php artisan config:cache
        - php artisan route:cache
        - php artisan optimize
